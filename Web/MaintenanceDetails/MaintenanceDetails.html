<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Détails de la maintenance</title>
  <link rel="stylesheet" href="../style.css" />
</head>
<body>
  <button id="backBtn">Retour</button>
  
  <main>
    <section class="active">
      <h1>Détails de la maintenance</h1>
      <div id="MaintenanceDetails"></div>

      <h2 style="margin-top: 2rem;">Produits associés</h2>
      <button class="primary" onclick="showAddProduitForm()" style="margin: 1rem 0;">+ Associer un produit</button>
      <div id="ListeProduits"></div>
    </section>
  </main>

  <!-- Formulaire pour associer un produit -->
  <div id="addProduitForm" class="modal">
    <form id="produitAssocForm" onsubmit="addProduitToMaintenance(event)">
      <h3>Associer un produit à cette maintenance</h3>
      <select id="produitSelect" required>
        <option value="">-- Sélectionner un produit --</option>
      </select>
      <select id="produitEtat">
        <option value="">-- État --</option>
        <option value="OK">OK</option>
        <option value="NOK">NOK</option>
        <option value="Passable">Passable</option>
        <option value="Non vérifié">Non vérifié</option>
      </select>
      <textarea id="produitCommentaire" placeholder="Commentaire sur l'état du produit"></textarea>
      <button class="primary" type="submit">Associer</button>
      <button type="button" onclick="hideAddProduitForm()">Annuler</button>
    </form>
  </div>

  <!-- Formulaire pour modifier l'état d'un produit -->
  <div id="editProduitForm" class="modal">
    <form id="produitEditForm" onsubmit="updateProduitMaintenance(event)">
      <h3>Modifier l'état du produit</h3>
      <input type="hidden" id="editProduitId" />
      <p><strong>Produit :</strong> <span id="editProduitNom"></span></p>
      <select id="editProduitEtat" required>
        <option value="">-- État --</option>
        <option value="OK">OK</option>
        <option value="NOK">NOK</option>
        <option value="Passable">Passable</option>
        <option value="Non vérifié">Non vérifié</option>
      </select>
      <textarea id="editProduitCommentaire" placeholder="Commentaire sur l'état du produit"></textarea>
      <button class="primary" type="submit">Mettre à jour</button>
      <button type="button" onclick="hideEditProduitForm()">Annuler</button>
    </form>
  </div>

  <script src="MaintenanceDetails.js" defer></script>
</body>
</html>